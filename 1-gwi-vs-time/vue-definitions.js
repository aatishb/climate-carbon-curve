// custom graph component
Vue.component('graph', {

  props: ['traces', 'layout', 'points', 'points2'],

  template: '<div ref="graph" class="graph" style="width: 700px; height: 700px;"></div>',

  methods: {

    makeGraph() {
      Plotly.newPlot(this.$refs.graph, this.traces, this.layout);
      requestAnimationFrame(this.update);
    },

    update() {

      this.traces[0].x.push(this.x.shift());
      this.traces[0].y.push(this.y.shift());

      Plotly.animate(this.$refs.graph, {
        data: [{x: this.traces[0].x, y: this.traces[0].y}]
      }, {
        transition: {
          duration: 50,
        },
        frame: {
          duration: 50,
        }
      });

      if (this.x.length > 0) {
        requestAnimationFrame(this.update);
      }
    }

  },

  mounted() {
    this.makeGraph();
  },

  data() {
    return {
      x: [1850, 1851, 1852, 1853, 1854, 1855, 1856, 1857, 1858, 1859, 1860, 1861, 1862, 1863, 1864, 1865, 1866, 1867, 1868, 1869, 1870, 1871, 1872, 1873, 1874, 1875, 1876, 1877, 1878, 1879, 1880, 1881, 1882, 1883, 1884, 1885, 1886, 1887, 1888, 1889, 1890, 1891, 1892, 1893, 1894, 1895, 1896, 1897, 1898, 1899, 1900, 1901, 1902, 1903, 1904, 1905, 1906, 1907, 1908, 1909, 1910, 1911, 1912, 1913, 1914, 1915, 1916, 1917, 1918, 1919, 1920, 1921, 1922, 1923, 1924, 1925, 1926, 1927, 1928, 1929, 1930, 1931, 1932, 1933, 1934, 1935, 1936, 1937, 1938, 1939, 1940, 1941, 1942, 1943, 1944, 1945, 1946, 1947, 1948, 1949, 1950, 1951, 1952, 1953, 1954, 1955, 1956, 1957, 1958, 1959, 1960, 1961, 1962, 1963, 1964, 1965, 1966, 1967, 1968, 1969, 1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017],
      y: [-0.02717434641, -0.02604934641, -0.02471601307, -0.02338267974, -0.02274101307, -0.02254101307, -0.02236601307, -0.02218267974, -0.02157434641, -0.02116601307, -0.02159101307, -0.02224934641, -0.02273267974, -0.02306601307, -0.02290767974, -0.02241601307, -0.02194101307, -0.02109101307, -0.02003267974, -0.01876601307, -0.01699934641, -0.01523267974, -0.01377434641, -0.01175767974, -0.009374346405, -0.007066013072, -0.004466013072, -0.002441013072, -0.0007076797386, 0.001058986928, 0.002492320261, 0.003650653595, 0.004967320261, 0.006058986928, 0.007417320261, 0.009300653595, 0.01127565359, 0.01441732026, 0.01841732026, 0.02207565359, 0.02544232026, 0.02850065359, 0.03135065359, 0.03440898693, 0.03725065359, 0.03956732026, 0.04178398693, 0.04403398693, 0.04661732026, 0.04984232026, 0.05257565359, 0.05440065359, 0.05590065359, 0.05793398693, 0.06113398693, 0.06421732026, 0.06709232026, 0.07063398693, 0.07394232026, 0.07770898693, 0.08132565359, 0.08385065359, 0.08702565359, 0.09048398693, 0.09408398693, 0.09859232026, 0.1037589869, 0.1088839869, 0.1134006536, 0.1181589869, 0.1232673203, 0.1281923203, 0.1326923203, 0.1363589869, 0.1396839869, 0.1428673203, 0.1455673203, 0.1481173203, 0.1510173203, 0.1545423203, 0.1580839869, 0.1612756536, 0.1651173203, 0.1690923203, 0.1734839869, 0.1782839869, 0.1824589869, 0.1857839869, 0.1895673203, 0.1936589869, 0.1976839869, 0.2016673203, 0.2051506536, 0.2089256536, 0.2121756536, 0.2148756536, 0.2169173203, 0.2185339869, 0.2201006536, 0.2213839869, 0.2230173203, 0.2248173203, 0.2269089869, 0.2290839869, 0.2314589869, 0.2336006536, 0.2357339869, 0.2384006536, 0.2412506536, 0.2445756536, 0.2486006536, 0.2519173203, 0.2551256536, 0.2582006536, 0.2616339869, 0.2655839869, 0.2702006536, 0.2752089869, 0.2807339869, 0.2866839869, 0.2934256536, 0.3006339869, 0.3096339869, 0.3199589869, 0.3312756536, 0.3441506536, 0.3578256536, 0.3722923203, 0.3879173203, 0.4042923203, 0.4212173203, 0.4388256536, 0.4554173203, 0.4709506536, 0.4866089869, 0.5023006536, 0.5176923203, 0.5332839869, 0.5491589869, 0.5650839869, 0.5804923203, 0.5952923203, 0.6094923203, 0.6232589869, 0.6352506536, 0.6467339869, 0.6584339869, 0.6704923203, 0.6827756536, 0.6954173203, 0.7087173203, 0.7219256536, 0.7349423203, 0.7489923203, 0.7633673203, 0.7787339869, 0.7945006536, 0.8105423203, 0.8270089869, 0.8437506536, 0.8598506536, 0.8763756536, 0.8929256536, 0.9108673203, 0.9299089869, 0.9495339869, 0.9703089869, 0.9902506536],
    }
  }

})

// global data
let app = new Vue({

  el: '#root',

  computed: {

  },

  data: {

    gwi: {
      x: [],
      y: [],
      text: ['1850', '', '', '', '', '', '', '', '', '', '1860', '', '', '', '', '', '', '', '', '', '1870', '', '', '', '', '', '', '', '', '', '1880', '', '', '', '', '', '', '', '', '', '1890', '', '', '', '', '', '', '', '', '', '1900', '', '', '', '', '', '', '', '', '', '1910', '', '', '', '', '', '', '', '', '', '1920', '', '', '', '', '', '', '', '', '', '1930', '', '', '', '', '', '', '', '', '', '1940', '', '', '', '', '', '', '', '', '', '1950', '', '', '', '', '', '', '', '', '', '1960', '', '', '', '', '', '', '', '', '', '1970', '', '', '', '', '', '', '', '', '', '1980', '', '', '', '', '', '', '', '', '', '1990', '', '', '', '', '', '', '', '', '', '2000', '', '', '', '', '', '', '', '', '', '2010', '', '', '', '', '', '', '2017'],
      type: 'scatter',
      mode: 'markers+text',
      line: {simplify: false},
      textposition: 'topleft',
      marker: {
        color: 'rgb(128, 0, 128)',
        size: 4
      },
      line: {
        color: 'rgb(128, 0, 128)',
        width: 2
      }

    },

    layout: {

      xaxis: {
        title: 'Year',
      },

      yaxis: {
        title: 'Global Warming Index (in Â°C, relative to 1850-1900)',
       },

      font: {
        family: 'Open Sans',
        size: 18,
        color: '#7f7f7f'
      },

      showlegend: false,
    }

  }

})
